1. Data Expectations

1.1. Completeness:
1.1.1. Every record in the Application entity must have a valid Application Started Date, Application Status, and associated Applicant, Credit Product, and Acquisition Channel.
1.1.2. Applications with a status of 'Submitted', 'Approved', or 'Rejected' must have a non-null Application Submitted Date.
1.1.3. Applications with a status of 'Approved' must have a non-null and positive Approved Credit Amount.
1.1.4. All Applicant records must have a non-null Applicant Age, Applicant Annual Income, Applicant State, Employment Type, and Credit Score.

1.2. Accuracy:
1.2.1. Applicant Annual Income and Approved Credit Amount must be recorded with a high degree of precision, representing correct financial values.
1.2.2. Applicant Age must accurately reflect the applicant's age at the time of application submission.
1.2.3. Credit Score must be the official score used during the application evaluation process.

1.3. Format:
1.3.1. All date fields (Application Started Date, Application Submitted Date) must conform to a consistent DATETIME or TIMESTAMP format (e.g., YYYY-MM-DD HH:MI:SS UTC).
1.3.2. Categorical fields such as Application Status, Employment Type, Product Name, and Channel Name must use a predefined and consistent set of string values.

1.4. Consistency:
1.4.1. The Application Status must follow a logical workflow progression (e.g., a status cannot be 'Approved' if it was never 'Submitted').
1.4.2. An Application Submitted Date cannot be earlier than the Application Started Date for the same application.

2. Constraints

2.1. Mandatory Fields (NOT NULL):
2.1.1. Application Entity: Application Started Date, Application Status, Applicant Key, Product Key, Channel Key.
2.1.2. Applicant Entity: Applicant Age, Applicant Annual Income, Applicant State, Employment Type, Credit Score.
2.1.3. Credit Product Entity: Product Name.
2.1.4. Acquisition Channel Entity: Channel Name.

2.2. Uniqueness:
2.2.1. Each application must have a unique identifier (Application Key).
2.2.2. The Product Name must be unique within the Credit Product entity.
2.2.3. The Channel Name must be unique within the Acquisition Channel entity.

2.3. Data Type Limitations:
2.3.1. Integer/Numeric: Applicant Age and Credit Score must be INTEGER. Applicant Annual Income and Approved Credit Amount must be NUMERIC or FLOAT64.
2.3.2. Date/Time: Application Started Date and Application Submitted Date must be DATETIME or TIMESTAMP.
2.3.3. String: All other descriptive attributes like Application Status, Product Name, Channel Name, State, City, and Employment Type must be STRING.

2.4. Referential Integrity (Informational Constraints in BigQuery):
2.4.1. The Applicant Key in the Application entity must correspond to a valid Applicant Key in the Applicant entity.
2.4.2. The Product Key in the Application entity must correspond to a valid Product Key in the Credit Product entity.
2.4.3. The Channel Key in the Application entity must correspond to a valid Channel Key in the Acquisition Channel entity.

2.5. Value Constraints (to be enforced via ETL/ELT logic or CHECK constraints):
2.5.1. Application Status must be one of: 'Started', 'Submitted', 'Approved', 'Rejected'.
2.5.2. Applicant Age must be greater than or equal to 18.
2.5.3. Applicant Annual Income must be a non-negative value.
2.5.4. Credit Score must be within a valid range (e.g., 300 to 850).
2.5.5. Approved Credit Amount must be a non-negative value.

3. Business Rules

3.1. Application Status Logic:
3.1.1. An application is considered 'Started' once an Application Started Date is recorded.
3.1.2. An application is considered 'Submitted' once an Application Submitted Date is recorded. The status must be updated from 'Started' to 'Submitted'.
3.1.3. An application can only be moved to 'Approved' or 'Rejected' status if its current status is 'Submitted'.

3.2. Data Field Dependencies:
3.2.1. The Approved Credit Amount must be greater than zero only if the Application Status is 'Approved'. For all other statuses, it should be NULL or zero.
3.2.2. The Application Submitted Date must be NULL if the Application Status is 'Started'.

3.3. KPI Calculation Logic:
3.3.1. Approval Rate is calculated as (Total Number of Applications with 'Approved' status) / (Total Number of Applications with 'Submitted', 'Approved', or 'Rejected' status). The denominator should not be zero.
3.3.2. Average calculations (for Age, Income, Credit Score) should only include applicants from successfully submitted applications.
3.3.3. Total Approved Credit Amount is the sum of Approved Credit Amount for all applications where the status is 'Approved'.

3.4. Relationship Rules:
3.4.1. Each record in the Application entity must be associated with exactly one Applicant, one Credit Product, and one Acquisition Channel.